//  Purpose: Define styles for field on form.
@use "sass:math";
@use "../mixins/" as *;

label {
	display: block;
	margin-bottom: 8px;
	font-weight: 400;
	line-height: 1.5;
	&[aria-hidden="true"] {
		display: none;
	}
}

[type="text"],
[type="password"],
[type="date"],
[type="datetime"],
[type="datetime-local"],
[type="month"],
[type="week"],
[type="email"],
[type="number"],
[type="search"],
[type="tel"],
[type="time"],
[type="url"],
[type="color"],
[type="phone"],
[type="file"],
textarea,
select {
	padding: var(--space-14) var(--space-20);
	display: block;
	border-radius: 5rem;
	width: 100%;
	outline: none;
	line-height: var(--typography-lineheight-170);
	transition: border-color 0.3s ease;
	color: var(--form-color-input-text);
	font-size: var(--typography-bodytext-m);
	border: 1px solid rgb(var(--border-color));
	background-color: rgb(var(--theme-background));

	@include media-device('desktop-up') {
		font-size: var(--typography-bodytext-m);
	}

	&:focus {
		box-shadow: 0px 0px 6px 1px rgb(var(--border-color));
		transition: border-color 0.3s ease;
	}

	&:last-child {
		margin-bottom: 0;
	}

	&::placeholder {
		color: darkgrey;
		font-size: var(--typography-bodytext-m);
	}

	&:disabled {
		cursor: not-allowed;
		opacity: 0.5;
	}

	&.error {
		border-color: #d81f27;

		&::placeholder {
			color: transparent;
		}
	}

	/* Requires the element to be wrapped in a block-element with position: relative. */
	+strong,
	.error {
		visibility: visible;
		position: absolute;
		top: var(--space-34);
		left: var(--space-18);
		font-weight: 400;
		font-size: var(--typography-bodytext-s);
		color: #d81f27;

		&.active {
			visibility: visible;
		}

		@include media-device('desktop-up') {
			left: 25px;
		}
	}
}

[type='search'] {

	&::-webkit-search-decoration,
	&::-webkit-search-cancel-button,
	&::-webkit-search-results-button,
	&::-webkit-search-results-decoration {
		display: none;
	}

	display: block;
	border-radius: 5rem;
	width: 100%;
	padding: var(--space-12) var(--space-20);
	border: 2px solid transparent;
	outline: none;
	background-color: rgb(var(--theme-surface));
	color: currentColor;
	font-size: var(--typography-bodytext-m);
	line-height: var(--typography-lineheight-170);
	transition: border-color 0.3s ease;

	@include media-device('desktop-up') {
		font-size: var(--typography-body-large);
	}

	&:focus {
		border-color: rgb(var(--theme-on-surface));
		transition: border-color 0.125s ease;
	}

	&:last-child {
		margin-bottom: 0;
	}

	&::placeholder {
		color: darkgrey;
	}

	&:disabled {
		cursor: not-allowed;
		opacity: 0.5;
	}

	&:not(:placeholder-shown):not(:focus):invalid {
		border-color: #d81f27;
	}

	&:not(:placeholder-shown):not(:focus):valid {
		border-color: var(--color-dark-green);
	}

	/* Requires the element to be wrapped in a block-element with position: relative. */
	+strong {
		visibility: hidden;
		position: absolute;
		top: 1px;
		left: var(--space-18);
		font-weight: 400;
		font-size: var(--typography-body-small);
		color: #d81f27;

		&.active {
			visibility: visible;
		}

		@include media-device('desktop-up') {
			left: 25px;
		}
	}
}

[type="search"] {

	&::-webkit-search-decoration,
	&::-webkit-search-cancel-button,
	&::-webkit-search-results-button,
	&::-webkit-search-results-decoration {
		display: none;
	}

}

select {
	height: 52px;
	padding-right: ((1.625rem - 0.1rem) + 1.25rem + (1.625rem - 0.1rem));
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 8' style='transform: rotate(180deg);'%3E%3Cpath d='M0 7.4a.6.6 0 0 1 .178-.426L7.069.176a.615.615 0 0 1 .862 0l6.891 6.798a.595.595 0 0 1 0 .85.615.615 0 0 1-.862 0L7.5 1.451 1.04 7.824a.615.615 0 0 1-.862 0A.598.598 0 0 1 0 7.4' style='fill: %232d2d2c;'%3E%3C/path%3E%3C/svg%3E");
	background-position: right (1.625rem - 0.1rem) center;
	background-repeat: no-repeat;
	background-size: 1.25rem auto;

	@include media-device('desktop-up') {
		padding-right: ((2rem - 0.1rem) + 1.25rem + (2rem - 0.1rem));
		background-position: right (2rem - 0.1rem) center;
	}
}

input[type="checkbox"],
input[type="radio"] {
	@include visually-hidden;
	margin: (math.div(((18px * 1.25) - 20px), 2) + 20px) 0 0 math.div(20px, 2);

	@include media-device('desktop-up') {
		margin: (math.div(((20px * 1.25) - 20px), 2) + 20px) 0 0 math.div(20px, 2);
	}

	&:focus-visible {
		+label {
			&:before {
				border-color: rgb(var(--theme-on-surface));
				transition: border-color 0.3s ease;
			}
		}
	}

	&:checked {
		+label {
			&:after {
				opacity: 1;
				transition: opacity 0.3s ease;
			}
		}
	}

	&:disabled {
		+label {
			cursor: not-allowed;
			opacity: 0.5;
		}
	}

	+label {
		line-height: 1.5;
		color: inherit;
		position: relative;
		padding: 0;
		font-size: var(--typography-bodytext-m);
		cursor: pointer;
		user-select: none;

		@include media-device('desktop-up') {
			font-size: var(--typography-bodytext-m);
			line-height: var(--typography-lineheight-140);
		}

		&>p {
			@include media-device('desktop-up') {
				font-size: var(--typography-bodytext-m);
			}
		}

		&:active {
			&:before {
				border-color: rgb(var(--theme-surface));
				transition: border-color 0.3s ease;
			}
		}

		&:before,
		&:after {
			content: '';
			position: absolute;
		}

		&:before {
			top: 0;
			left: 0;
			height: 20px;
			width: 20px;
			border: 1px solid rgb(var(--theme-surface));
			background-color: rgb(var(--theme-surface));
			transition: border-color 0.3s ease;
		}

		&:after {
			top: 4px;
			left: 4px;
			height: (20px - (4px * 2));
			width: (20px - (4px * 2));
			background-color: #bf8000;
			opacity: 0;
			transition: opacity 0.3s ease;
		}
	}
}

input[type='radio'] {
	+label {

		&:before,
		&:after {
			border-radius: 50%;
		}
	}
}


// Form grid

.form-grid {
	display: grid;
	grid-template-columns: repeat(6, minmax(0, 1fr));
	grid-gap: var(--space-s) var(--space-m);

	.form-heading {
		display: inline-block;
		background-position: left 0 bottom 0px;
		background-size: 100% 0.3rem;
		background-repeat: no-repeat;
		line-height: var(--typography-lineheight-170);
		margin-bottom: var(--space-s);
	}

	.form-item {
		position: relative;

		@include media-device('tablet-up') {
			margin-bottom: var(--space-xs);
		}
	}

	.form-required {
		padding: 0 5px;
	}

	.form-tooltip-blob {
		width: 100%;
		z-index: 1;
		max-width: 390px;
		white-space: normal;
	}

	.form-tooltip {
		border-radius: 50%;
		color: rgb(var(--theme-surface));
		font-weight: bold;
		font-size: var(--typography-bodytext-m);
		width: 30px;
		height: 30px;
		display: flex;
		justify-content: center;
		align-items: center;
		position: absolute;
		right: 11px;
		top: 71%;
		transform: translateY(-60%);

		cursor: pointer;

		&:hover {
			border-radius: 50%;
			transform: translateY(-60%);
		}


		&_error {
			background-color: #d81f27 !important;
			color: rgb(var(--theme-surface));

			&:hover {
				color: rgb(var(--theme-surface));
			}
		}
	}

	.form-radio-buttons {
		display: flex;
		flex-wrap: wrap;
		gap: var(--space-l)
	}

	.grid-span {
		grid-column: 1/-1;
		position: relative;
	}

	.grid-span-2 {
		grid-column: 1/-1;

		@include media-device('tablet-up') {
			grid-column: 1/3;
		}
	}

	.grid-span-2-mid {
		grid-column: 1/-1;

		@include media-device('tablet-up') {
			grid-column: 3/5;
		}
	}

	.grid-span-2-end {
		grid-column: 1/-1;

		@include media-device('tablet-up') {
			grid-column: 5/-1;
		}
	}

	.grid-span-3 {
		grid-column: 1/-1;

		@include media-device('tablet-up') {
			grid-column: 1/4;
		}
	}

	.grid-span-3-end {
		grid-column: 1/-1;

		@include media-device('tablet-up') {
			grid-column: 4/-1;
		}
	}
}